type CompanyVehicle @model @auth(rules: [{allow: public}]) {
  id: ID!
  vehicleType: String
  model: String
  plateNumber: String
  couriercompanyID: ID! @index(name: "byCourierCompany")
}

type CourierCompany @model @auth(rules: [{allow: public}]) {
  id: ID!
  sub: String!
  firstName: String!
  lastName: String
  profilePic: String
  address: String
  lat: Float
  lng: Float
  landmark: String
  phoneNumber: String
  email: String
  adminFirstName: String
  adminLastName: String
  adminPhoneNumber: String
  bankName: String
  CompanyVehicles: [CompanyVehicle] @hasMany(indexName: "byCourierCompany", fields: ["id"])
  accountNumber: String
  push_token: String
}

enum OrderStatus {
  READY_FOR_PICKUP
  ACCEPTED
  ARRIVED_PICKUP
  LOADING
  IN_TRANSIT
  ARRIVED_DROPOFF
  UNLOADING
  DELIVERED
  HANDOVER_TO_LOGISTICS
  IN_LOGISTICS_TRANSIT
  CANCELLED
  DISPUTED
}

type Order @model @auth(rules: [{allow: public}]) {
  id: ID!

  # ---------------- BASIC INFO ----------------
  recipientName: String
  recipientNumber: String
  recipientNumber2: String
  orderDetails: String

  originAddress: String
  originLat: Float
  originLng: Float
  
  destinationAddress: String
  destinationLat: Float
  destinationLng: Float

  transportationType: String
  status: OrderStatus

   # ---------------- PRICING ----------------
  totalPrice: Float
  courierFee: Float
  loadingFee: Float
  unloadingFee: Float
  commissionRate: Float
  platformRevenue: Float

   # ---------------- VERIFICATION ----------------
  deliveryVerificationCode: String

  # ---------------- WEIGHT ----------------
  declaredWeightBracket: String

  # ---------------- CUSTODY EVIDENCE ----------------
  senderPreTransferPhotos: [String]
  senderPreTransferVideo: String
  senderPreTransferRecordedAt: AWSDateTime

  courierPreTransferPhotos: [String]
  courierPreTransferVideo: String
  courierPreTransferRecordedAt: AWSDateTime

  courierPostLoadingPhotos: [String]
  courierPostLoadingVideo: String

  dropoffArrivalPhotos: [String]
  dropoffArrivalVideo: String

  postDeliveryPhotos: [String]
  postDeliveryVideo: String

  # ---------------- LOADING DETAILS ----------------
  pickupLoadingResponsibility: String
  pickupFloorLevel: String
  pickupHasElevator: Boolean

  dropoffUnloadingResponsibility: String
  dropoffFloorLevel: String
  dropoffHasElevator: Boolean

  # ---------------- TIME EVENTS ----------------
  acceptedAt: AWSDateTime
  arrivedPickupAt: AWSDateTime
  loadingStartedAt: AWSDateTime
  tripStartedAt: AWSDateTime
  arrivedDropoffAt: AWSDateTime
  unloadingCompletedAt: AWSDateTime

  # ---------------- LOGISTICS COMPANY (INTERSTATE) ----------------
  logisticsCompanyId: ID
  waybillNumber: String
  waybillPhoto: String
  logisticsTrackingCode: String
  logisticsTrackingStatus: String
  handedOverToLogisticsAt: AWSDateTime
  logisticsIntakeConfirmedAt: AWSDateTime

  # ---------------- RELATIONS ----------------
  userID: ID! @index(name: "byUser")
  Courier: Courier @hasOne
}

type Courier @model @auth(rules: [{allow: public}]) {
  id: ID!
  sub: String!
  isOnline: Boolean
  firstName: String!
  lastName: String
  profilePic: String
  address: String
  landMark: String
  phoneNumber: String
  email: String
  courierNIN: String
  courierNINImage: String
  bankCode: String
  bankName: String
  accountName: String
  accountNumber: String
  transportationType: String
  vehicleClass: String
  model: String
  plateNumber: String
  maxiImages: [String]
  guarantorName: String
  guarantorLastName: String
  guarantorProfession: String
  guarantorNumber: String
  guarantorRelationship: String
  guarantorAddress: String
  guarantorEmail: String
  guarantorNIN: String
  guarantorNINImage: String
  lat: Float
  lng: Float
  heading: Float
  push_token: String
  isApproved: Boolean
  approvedBy: String
}

type User @model @auth(rules: [{allow: public}]) {
  id: ID!
  sub: String!
  firstName: String!
  lastName: String
  email: String
  phoneNumber: String
  profilePic: String
  address: String
  exactAddress: String
  lat: Float
  lng: Float
  push_token: String
  Orders: [Order] @hasMany(indexName: "byUser", fields: ["id"])
}
 